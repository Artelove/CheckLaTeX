# Руководство по тестированию функциональности проверки шрифтов

## Описание тестовых документов

### 1. `fonts-test.tex` - Правильная конфигурация
Документ с правильными настройками:
- ✅ Размер шрифта: 12pt (рекомендуемый)
- ✅ Шрифтовой пакет: times (рекомендуемый)
- ✅ Математический шрифт: newtxmath (согласованный)
- ✅ Маргины: 2.5cm (стандартные)
- ✅ Межстрочный интервал: 1.5 через onehalfspacing

**Ожидаемый результат:** Минимальное количество предупреждений или их отсутствие.

### 2. `fonts-errors-test.tex` - Конфигурация с ошибками
Документ с различными ошибками:
- ❌ Размер шрифта: 10pt (нестандартный)
- ❌ Отсутствие шрифтового пакета
- ❌ Неправильный интервал: singlespacing
- ❌ Множественные определения интервалов
- ❌ Прямые команды изменения шрифтов

**Ожидаемые ошибки:**
1. Warning: "Размер шрифта '10pt' отличается от рекомендуемого '12pt'"
2. Info: "Не найдено явного определения шрифта"
3. Warning: "Используется одинарный межстрочный интервал вместо требуемого 1.5"
4. Warning: "Межстрочный интервал определяется в X местах"
5. Warning: "Прямое использование команды \fontsize"
6. Warning: "Прямое использование команды \fontfamily"

### 3. `fonts-alternatives-test.tex` - Альтернативные правильные настройки
Документ с допустимыми альтернативами:
- ✅ Размер шрифта: 11pt (допустимый)
- ✅ Шрифтовой пакет: mathptmx (альтернативный)
- ✅ Маргины: 25mm (альтернативные единицы)
- ✅ Интервал: setstretch{1.5} (альтернативный способ)

**Ожидаемый результат:** 
- Info: "Размер шрифта '11pt' отличается от рекомендуемого '12pt'"
- Info: "Используется шрифтовой пакет 'mathptmx'. Рекомендуется 'times'"

## Как запустить тесты

### Через API (рекомендуемый способ)

1. Запустите сервер:
```bash
cd tex-lint
dotnet run
```

2. Отправьте POST запрос на `http://localhost:5000/api/lint/check` с телом:
```json
{
  "latexContent": "содержимое_файла.tex",
  "fileName": "test-file.tex"
}
```

### Пример тестирования с curl

```bash
# Тест правильной конфигурации
curl -X POST http://localhost:5000/api/lint/check \
  -H "Content-Type: application/json" \
  -d '{
    "latexContent": "содержимое fonts-test.tex",
    "fileName": "fonts-test.tex"
  }'

# Тест конфигурации с ошибками
curl -X POST http://localhost:5000/api/lint/check \
  -H "Content-Type: application/json" \
  -d '{
    "latexContent": "содержимое fonts-errors-test.tex", 
    "fileName": "fonts-errors-test.tex"
  }'
```

## Настройка конфигурации для тестирования

В файле `lint-rules.json` можно изменить параметры проверки:

```json
{
  "MarginsAndSpacing": {
    "CheckFonts": true,
    "PreferredFontPackage": "times",
    "RequiredFontSize": "12pt",
    "AllowedFontSizes": ["10pt", "11pt", "12pt"],
    "AllowedFontPackages": ["times", "mathptmx", "newtxtext", "newtxmath"],
    "ForbiddenFontPackages": ["comic", "arev"],
    "CheckFontConsistency": true,
    "WarnAboutDirectFontCommands": true
  }
}
```

## Проверяемые аспекты

### Размер шрифта
- ✅ Определение размера в documentclass
- ✅ Соответствие требуемому размеру
- ✅ Проверка допустимых размеров

### Шрифтовые пакеты
- ✅ Обнаружение подключенных пакетов
- ✅ Проверка рекомендуемых пакетов
- ✅ Предупреждения о запрещенных пакетах
- ✅ Согласованность основного и математического шрифтов

### Прямые команды
- ✅ Обнаружение fontsize, fontfamily, selectfont
- ✅ Предупреждения о прямом использовании
- ✅ Рекомендации по замене на пакеты

### Множественные определения
- ✅ Подсчет количества определений шрифтов
- ✅ Предупреждения о множественных определениях

## Ожидаемые результаты тестов

После правильной реализации:
- `fonts-test.tex` должен проходить без критических ошибок
- `fonts-errors-test.tex` должен выдавать 6-8 предупреждений
- `fonts-alternatives-test.tex` должен выдавать 1-2 информационных сообщения 