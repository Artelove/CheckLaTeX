# Периодическая проверка LaTeX документов

## Обзор

CheckLaTeX Extension теперь поддерживает автоматическую периодическую проверку LaTeX документов. Эта функция позволяет автоматически анализировать ваши документы через заданные интервалы времени без необходимости ручного запуска проверки.

## Настройки

### Основные параметры

- **`checklatex.periodicCheck`** (boolean, по умолчанию: `false`)
  - Включает/выключает периодическую проверку
  - Можно быстро переключать через команду "Toggle Periodic Check"

- **`checklatex.periodicCheckInterval`** (number, по умолчанию: `300000` мс = 5 минут)
  - Интервал между проверками в миллисекундах
  - Минимальное значение: 30 секунд (30000 мс)
  - Максимальное значение: 1 час (3600000 мс)

- **`checklatex.periodicCheckScope`** (enum, по умолчанию: `"current"`)
  - `"current"` - проверять только текущий активный .tex файл
  - `"project"` - проверять весь LaTeX проект

- **`checklatex.periodicCheckOnlyWhenActive`** (boolean, по умолчанию: `true`)
  - Выполнять проверку только когда окно VS Code активно
  - Экономит ресурсы при работе с другими приложениями

## Использование

### Включение периодической проверки

1. **Через настройки VS Code:**
   - Откройте настройки (Ctrl+,)
   - Найдите "CheckLaTeX"
   - Включите "Periodic Check"

2. **Через команду:**
   - Откройте палитру команд (Ctrl+Shift+P)
   - Найдите "CheckLaTeX: Toggle Periodic Check"
   - Выполните команду

### Настройка интервала

```json
{
  "checklatex.periodicCheckInterval": 180000  // 3 минуты
}
```

### Настройка области проверки

```json
{
  "checklatex.periodicCheckScope": "project"  // проверять весь проект
}
```

## Индикаторы

### Статус-бар

Когда периодическая проверка активна:
- Иконка в статус-баре меняется на часы: `$(clock) CheckLaTeX`
- Подсказка показывает "CheckLaTeX - периодическая проверка активна"

Когда периодическая проверка отключена:
- Иконка в статус-баре: `$(search) CheckLaTeX`
- Подсказка: "Анализировать LaTeX проект"

### Вывод

Все действия периодической проверки записываются в канал вывода "CheckLaTeX":
- Время начала и окончания проверки
- Информация о настройках
- Результаты проверки
- Ошибки (если есть)

## Оптимизация производительности

### Защита от перегрузки
- Минимальный интервал между проверками: 30 секунд
- Предотвращение одновременного выполнения нескольких проверок
- Автоматическая остановка при неактивном окне (опционально)

### "Тихий" режим
- Периодические проверки работают в "тихом" режиме
- Результаты записываются в вывод, но не показываются всплывающие уведомления
- Диагностики обновляются автоматически

### Обработка ошибок
- Ошибки периодической проверки не останавливают работу расширения
- Подробная информация об ошибках записывается в вывод
- Уведомления об ошибках показываются только в режиме разработки

## Примеры конфигурации

### Быстрая проверка текущего файла
```json
{
  "checklatex.periodicCheck": true,
  "checklatex.periodicCheckInterval": 60000,     // 1 минута
  "checklatex.periodicCheckScope": "current",
  "checklatex.periodicCheckOnlyWhenActive": true
}
```

### Проверка всего проекта с большим интервалом
```json
{
  "checklatex.periodicCheck": true,
  "checklatex.periodicCheckInterval": 900000,    // 15 минут
  "checklatex.periodicCheckScope": "project",
  "checklatex.periodicCheckOnlyWhenActive": false
}
```

### Экономичная настройка
```json
{
  "checklatex.periodicCheck": true,
  "checklatex.periodicCheckInterval": 600000,    // 10 минут
  "checklatex.periodicCheckScope": "current",
  "checklatex.periodicCheckOnlyWhenActive": true
}
```

## Интеграция с другими функциями

### Совместимость с auto-analyze
- Периодическая проверка работает независимо от `autoAnalyze`
- Обе функции могут быть включены одновременно
- При сохранении файла сначала срабатывает `autoAnalyze`, затем по расписанию - периодическая проверка

### Управление диагностикой
- Периодическая проверка обновляет диагностики автоматически
- Можно очистить диагностики вручную командой "Clear Diagnostics"
- Диагностики сохраняются между проверками

## Устранение неполадок

### Проблема: Периодическая проверка не запускается
- Проверьте, что `checklatex.periodicCheck` установлен в `true`
- Убедитесь, что окно VS Code активно (если включен `periodicCheckOnlyWhenActive`)
- Проверьте, что в workspace есть .tex файлы

### Проблема: Слишком частые проверки
- Установите больший интервал в `periodicCheckInterval`
- Включите `periodicCheckOnlyWhenActive` для экономии ресурсов

### Проблема: Ошибки проверки
- Проверьте доступность сервера CheckLaTeX
- Убедитесь, что `serverUrl` настроен правильно
- Проверьте вывод в канале "CheckLaTeX" для подробной информации

## Команды

- `checklatex.togglePeriodicCheck` - Переключить периодическую проверку
- `checklatex.clearDiagnostics` - Очистить диагностики
- `checklatex.refreshResults` - Обновить результаты

## Рекомендации

1. **Для активной разработки:** используйте интервал 1-3 минуты с проверкой текущего файла
2. **Для больших проектов:** используйте интервал 10-15 минут с проверкой всего проекта
3. **Для экономии ресурсов:** включайте `periodicCheckOnlyWhenActive`
4. **При работе с медленным сервером:** увеличьте интервал проверки 